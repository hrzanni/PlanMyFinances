{% extends 'base.html' %} {% block body %}
<div class="content">
    <h1 class="name">PlanMyFinances</strong></h1>

    <div class="add-container">
      <div class="add">
        <h3>Adicionar Receita</h3>
        <button id="add-button-revenue" class="add-button-green">+</button>
        <p>Clique para adicionar uma receita</p>
      </div>

      <div class="add">
        <h3>Adicionar Despesa</h3>
        <button id="add-button-expense" class="add-button-red">+</button>
        <p>Clique para adicionar uma despesa</p>
      </div>
    </div>

    <div id="add-button-revenue-form" class="modal-overlay" style="display: none">
        <div class="modal-content">
            <button id="close-modal" class="close-button">×</button>
            <form action="/add-revenue" method="POST">
                <h1>ADICIONAR RECEITA</h1>
                <label for="valor">Valor:</label>
                <input type="number" name="valor" required><br>

                <label for="descricao">Descrição:</label>
                <input type="text" name="descricao" required><br>

                <label for="tipo">Tipo:</label>
                <input type="text" name="tipo" required><br>

                <label for="subtipo">Subtipo:</label>
                <input type="text" name="subtipo"><br>

                <label for="data">Data:</label>
                <input type="date" name="data" id="data-input" required><br>

                <button type="submit">Salvar</button>
            </form>
        </div>
    </div>

    <div id="add-button-expense-form" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <button id="close-expense-modal" class="close-button">×</button>
          <form action="/add-expense" method="POST">
            <h1>ADICIONAR DESPESA</h1>
            <label for="valor">Valor:</label>
            <input type="number" name="valor" required><br>
      
            <label for="descricao">Descrição:</label>
            <input type="text" name="descricao" required><br>
      
            <label for="tipo">Tipo:</label>
            <input type="text" name="tipo" required><br>
      
            <label for="subtipo">Subtipo:</label>
            <input type="text" name="subtipo"><br>
      
            <label for="data">Data:</label>
            <input type="date" name="data" id="data-expense-input" required><br>
      
            <button type="submit">Salvar</button>
          </form>
        </div>
      </div>

    <div class="add-typeANDSubtype">
        <h2>Gerenciador de Tipos e SubTipos</h2>
        <div class="add-typeANDSubtype-type">
            <form action="/add-type" method="POST">
                <input type="text" name="tipos" placeholder="Adicione um tipo" required>
                <button class="add-type-button" type="submit">+</button>
            </form>
            <table class="styled-table">
                <thead>
                  <tr>
                    <th>Tipos criados</th>
                  </tr>
                </thead>
                <tbody>
                  {% for item in tipos_disponiveis %}
                    <tr>
                      <td>{{ item }}</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
        </div>

        <div class="add-typeANDSubtype-subtype">
            <form action="/add-subtype" method="POST">
                <input type="text" name="subtipos" placeholder="Adicione um subtipo" required>
                <button class="add-subtype-button" type="submit">+</button>
            </form>
            <table class="styled-table">
                <thead>
                  <tr>
                    <th>Subtipos criados</th>
                  </tr>
                </thead>
                <tbody>
                  {% for item in subtipos_disponiveis %}
                    <tr>
                      <td>{{ item }}</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
        </div>
        
    </div>
    
    <script>
        // Receita
        const openRevenueBtn = document.getElementById("add-button-revenue");
        const revenueModal = document.getElementById("add-button-revenue-form");
        const closeRevenueBtn = document.getElementById("close-modal");
      
        openRevenueBtn.addEventListener("click", () => {
          revenueModal.style.display = "flex";
          const today = new Date().toISOString().split("T")[0];
          document.getElementById("data-input").value = today;
        });
      
        closeRevenueBtn.addEventListener("click", () => {
          revenueModal.style.display = "none";
        });
      
        window.addEventListener("click", (e) => {
          if (e.target === revenueModal) {
            revenueModal.style.display = "none";
          }
        });
      
        // Despesa
        const openExpenseBtn = document.getElementById("add-button-expense");
        const expenseModal = document.getElementById("add-button-expense-form");
        const closeExpenseBtn = document.getElementById("close-expense-modal");
      
        openExpenseBtn.addEventListener("click", () => {
          expenseModal.style.display = "flex";
          const today = new Date().toISOString().split("T")[0];
          document.getElementById("data-expense-input").value = today;
        });
      
        closeExpenseBtn.addEventListener("click", () => {
          expenseModal.style.display = "none";
        });
      
        window.addEventListener("click", (e) => {
          if (e.target === expenseModal) {
            expenseModal.style.display = "none";
          }
        });
      </script>
</div>
{% endblock %}
